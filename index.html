<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Viral+</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#7c3aed">

<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8210705555437597"
crossorigin="anonymous"></script>

<style>
body{
margin:0;
font-family:Arial,sans-serif;
background:#2b145c;
color:#fff;
}

header{
position:sticky;
top:0;
z-index:10;
background:linear-gradient(90deg,#7c3aed,#3bf0ff);
padding:15px;
text-align:center;
font-size:24px;
font-weight:bold;
box-shadow:0 4px 15px rgba(0,0,0,.4);
}

nav{
display:flex;
justify-content:space-around;
background:#351a6f;
padding:10px;
}

nav button{
background:#7c3aed;
border:none;
color:white;
padding:10px 14px;
border-radius:20px;
font-weight:bold;
cursor:pointer;
transition:.3s;
}
nav button:hover{
background:#3bf0ff;
color:#000;
}

main{
max-width:600px;
margin:auto;
padding:15px;
}

.module{
background:#3a1c7a;
border-radius:16px;
padding:15px;
margin-bottom:20px;
box-shadow:0 0 15px rgba(59,240,255,.15);
}

.post{
background:#47208f;
border-radius:14px;
padding:12px;
margin-bottom:15px;
animation:fadeIn .4s ease;
}

@keyframes fadeIn{
from{opacity:0;transform:translateY(10px)}
to{opacity:1;transform:none}
}

.post img,video{
width:100%;
border-radius:10px;
margin-top:8px;
}

.actions button{
margin:5px 5px 0 0;
background:#7c3aed;
border:none;
padding:6px 10px;
border-radius:12px;
color:white;
cursor:pointer;
}

.comment{
background:#5b2fb3;
padding:6px;
border-radius:8px;
margin-top:5px;
font-size:14px;
}

/* PILE √âLECTRIQUE */
.battery{
width:100%;
height:40px;
border:3px solid #3bf0ff;
border-radius:10px;
position:relative;
overflow:hidden;
margin-top:10px;
}

.energy{
height:100%;
width:0%;
background:linear-gradient(90deg,#3bf0ff,#00fff2);
box-shadow:0 0 20px #3bf0ff;
animation:pulse 1s infinite;
}

@keyframes pulse{
0%{opacity:.7}
50%{opacity:1}
100%{opacity:.7}
}

.spark{
position:absolute;
width:100%;
height:100%;
background:radial-gradient(circle,#fff 10%,transparent 60%);
opacity:.15;
animation:spark 0.5s infinite;
}

@keyframes spark{
from{transform:translateX(-20px)}
to{transform:translateX(20px)}
}

/* Graph */
canvas{
width:100%;
height:150px;
background:#2b145c;
border-radius:10px;
margin-top:10px;
}

textarea,input{
width:100%;
padding:8px;
border-radius:10px;
border:none;
margin-top:5px;
}

.ad{
margin:20px 0;
}
</style>
</head>

<body>

<header>‚ö° Viral+</header>

<nav>
<button onclick="show('home')">Home</button>
<button onclick="show('publish')">Publier</button>
<button onclick="show('pop')">Popularit√©</button>
</nav>

<main>

<!-- HOME -->
<div id="home" class="module"></div>

<!-- PUBLIER -->
<div id="publish" class="module" style="display:none">
<textarea id="text" placeholder="Exprime-toi‚Ä¶"></textarea>
<input type="file" id="media" accept="image/*,video/*">
<button onclick="publish()">Publier</button>
</div>

<!-- POPULARIT√â -->
<div id="pop" class="module" style="display:none">
<h3>√ânergie de popularit√©</h3>
<div class="battery">
<div class="energy" id="energy"></div>
<div class="spark"></div>
</div>
<canvas id="graph"></canvas>
</div>

<div class="ad">
<ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-8210705555437597"
data-ad-format="auto"
data-full-width-responsive="true"></ins>
</div>

</main>

<script>
let feed=JSON.parse(localStorage.getItem("vpFeed")||"[]");
let pop=Number(localStorage.getItem("vpPop")||0);
let history=[...Array(20).keys()].map(()=>pop);

function save(){
localStorage.setItem("vpFeed",JSON.stringify(feed));
localStorage.setItem("vpPop",pop);
}

function show(id){
["home","publish","pop"].forEach(x=>{
document.getElementById(x).style.display=(x==id?"block":"none");
});
}

function publish(){
let t=document.getElementById("text").value;
let f=document.getElementById("media").files[0];
if(!t)return;
let r=new FileReader();
r.onload=()=>{
feed.unshift({t,media:r.result,likes:0,com:[]});
save();render();
};
if(f)r.readAsDataURL(f); else r.onload();
document.getElementById("text").value="";
}

function render(){
let h=document.getElementById("home");
h.innerHTML="";
feed.forEach((p,i)=>{
let d=document.createElement("div");
d.className="post";
d.innerHTML=`<b>Utilisateur</b><br>${p.t}`;
if(p.media){
if(p.media.startsWith("data:video"))d.innerHTML+=`<video src="${p.media}" controls></video>`;
else d.innerHTML+=`<img src="${p.media}">`;
}
d.innerHTML+=`
<div class="actions">
<button onclick="like(${i})">üëç ${p.likes}</button>
<button onclick="share()">üîó Partager</button>
<button onclick="comment(${i})">üí¨</button>
</div>`;
p.com.forEach(c=>d.innerHTML+=`<div class="comment">${c}</div>`);
h.appendChild(d);
});
}

function like(i){
feed[i].likes++;
pop+=2;
history.push(pop);history.shift();
save();render();draw();
}

function comment(i){
let c=prompt("Commentaire");
if(c){feed[i].com.push(c);save();render();}
}

function share(){
let url=location.href;
window.open(`https://wa.me/?text=${encodeURIComponent(url)}`);
}

function draw(){
let e=document.getElementById("energy");
e.style.width=Math.min(pop,100)+"%";

let c=document.getElementById("graph");
let x=c.getContext("2d");
x.clearRect(0,0,c.width,c.height);
x.strokeStyle="#3bf0ff";
x.beginPath();
history.forEach((v,i)=>{
let px=i*(c.width/20);
let py=c.height-(v*1.2);
i?x.lineTo(px,py):x.moveTo(px,py);
});
x.stroke();
}

setInterval(()=>{
if(pop>0)pop--;
history.push(pop);history.shift();
save();draw();
},2000);

render();draw();
(adsbygoogle=window.adsbygoogle||[]).push({});
</script>

</body>
</html>
