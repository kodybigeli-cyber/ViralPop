<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Viral+ Ultimate</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Barre supÃ©rieure -->
<div class="top-bar">
  <div id="stats-bar">
    <span id="likesCount">0 Likes</span>
    <span id="popCount">0 Pop+</span>
    <div id="badge-bar"><div id="badge-fill"></div></div>
  </div>
</div>

<div id="feed-container" style="scroll-snap-type: y mandatory; overflow-y: scroll; height:100vh;">

  <!-- VIDEO 1 -->
  <div class="video-wrapper">
    <video src="video1.mp4" class="feed-video" autoplay muted loop></video>

    <div class="actions-bar">
      <button onclick="like(this)">â¤ï¸ <span>0</span></button>
      <button onclick="popPlus(this)">âš¡ Pop+</button>
      <button onclick="boost(this)">ğŸš€ Boost</button>
      <button onclick="toggleComment(this)">ğŸ’¬</button>
    </div>

    <div class="comment-box hidden">
      <input type="text" placeholder="Ã‰crire un commentaire">
      <button onclick="sendComment(this)">Envoyer</button>
      <div class="comments-list"></div>
    </div>

    <div class="influencer-badge">â­</div>
  </div>

  <!-- VIDEO 2 -->
  <div class="video-wrapper">
    <video src="video2.mp4" class="feed-video" autoplay muted loop></video>

    <div class="actions-bar">
      <button onclick="like(this)">â¤ï¸ <span>0</span></button>
      <button onclick="popPlus(this)">âš¡ Pop+</button>
      <button onclick="boost(this)">ğŸš€ Boost</button>
      <button onclick="toggleComment(this)">ğŸ’¬</button>
    </div>

    <div class="comment-box hidden">
      <input type="text" placeholder="Ã‰crire un commentaire">
      <button onclick="sendComment(this)">Envoyer</button>
      <div class="comments-list"></div>
    </div>

    <div class="influencer-badge">â­</div>
  </div>

</div>

<script>
/********* INTERACTIONS *********/
function like(btn){
  const span = btn.querySelector("span");
  span.innerText = parseInt(span.innerText) + 1;
  updateStats(btn);
}

function popPlus(btn){
  const wrapper = btn.closest(".video-wrapper");
  wrapper.dataset.pop = wrapper.dataset.pop ? parseInt(wrapper.dataset.pop)+1 : 1;
  updateStats(btn);
}

function boost(btn){
  alert("Boost sponsorisÃ© activÃ© !");
}

function toggleComment(btn){
  const box = btn.closest(".video-wrapper").querySelector(".comment-box");
  box.classList.toggle("hidden");
}

function sendComment(btn){
  const input = btn.previousElementSibling;
  const text = input.value.trim();
  if(text === "") return;
  const list = btn.parentElement.querySelector(".comments-list");
  const p = document.createElement("p");
  p.innerText = text;
  list.appendChild(p);
  input.value = "";
}

/********* BADGE VIP & STATS *********/
function updateStats(btn){
  const wrapper = btn.closest(".video-wrapper");
  const likes = wrapper.querySelector(".actions-bar button span").innerText;
  const pops = wrapper.dataset.pop || 0;
  wrapper.querySelector(".influencer-badge").innerText = (parseInt(likes)+parseInt(pops))>=50 ? "VIP" : "â­";

  // Mettre Ã  jour la barre de progression
  const fillPercent = Math.min(100, (parseInt(pops)/50)*100);
  wrapper.querySelector("#badge-fill")?.style.width = fillPercent+"%";
}

/********* AUTOPLAY / PAUSE VIDÃ‰OS *********/
const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) entry.target.play();
    else entry.target.pause();
  });
},{threshold:0.75});

const videos = document.getElementsByClassName("feed-video");
Array.from(videos).forEach(v=>observer.observe(v));
</script>

</body>
</html>
